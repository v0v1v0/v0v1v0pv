<div class="container">

<table style="width: 100%;"><tr>
<td>local_variable_importance</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Local Variable Importance measure based on Ceteris Paribus profiles.</h2>

<h3>Description</h3>

<p>This function calculate local importance measure in eight variants. We obtain eight variants measure through the possible options of three parameters such as <code>absolute_deviation</code>, <code>point</code> and <code>density</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">local_variable_importance(
  profiles,
  data,
  absolute_deviation = TRUE,
  point = TRUE,
  density = TRUE,
  grid_points = 101
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>profiles</code></td>
<td>
<p><code>data.frame</code> generated by <code>DALEX::predict_profile()</code>, <code>DALEX::individual_profile()</code> or <code>ingredients::ceteris_paribus()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p><code>data.frame</code> with raw data to model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>absolute_deviation</code></td>
<td>
<p>logical parameter, if <code>absolute_deviation = TRUE</code> then measure is calculated as absolute deviation, else is calculated as a root from average squares</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>point</code></td>
<td>
<p>logical parameter, if <code>point = TRUE</code> then measure is calculated as a distance from f(x), else measure is calculated as a distance from average profiles</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>density</code></td>
<td>
<p>logical parameter, if <code>density = TRUE</code> then measure is weighted based on the density of variable, else is not weighted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid_points</code></td>
<td>
<p>maximum number of points for profile calculations, the default values is 101, the same as in <code>ingredients::ceteris_paribus()</code>, if you use a different on, you should also change here</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>data.frame</code> of the class <code>local_variable_importance</code>.
It's a <code>data.frame</code> with calculated local variable importance measure.
</p>


<h3>Examples</h3>

<pre><code class="language-R">

library("DALEX")
data(apartments)

library("randomForest")
apartments_rf_model &lt;- randomForest(m2.price ~ construction.year + surface +
                                    floor + no.rooms, data = apartments)

explainer_rf &lt;- explain(apartments_rf_model, data = apartmentsTest[,2:5],
                        y = apartmentsTest$m2.price)

new_apartment &lt;- data.frame(construction.year = 1998, surface = 88, floor = 2L, no.rooms = 3)

profiles &lt;- predict_profile(explainer_rf, new_apartment)


library("vivo")
local_variable_importance(profiles, apartments[,2:5],
                          absolute_deviation = TRUE, point = TRUE, density = TRUE)

local_variable_importance(profiles, apartments[,2:5],
                          absolute_deviation = TRUE, point = TRUE, density = FALSE)

local_variable_importance(profiles, apartments[,2:5],
                          absolute_deviation = TRUE, point = FALSE, density = TRUE)



</code></pre>


</div>