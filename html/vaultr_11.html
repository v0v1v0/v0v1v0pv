<div class="container">

<table style="width: 100%;"><tr>
<td>vault_client_auth_userpass</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Vault Username/Password Authentication Configuration</h2>

<h3>Description</h3>

<p>Vault Username/Password Authentication Configuration
</p>
<p>Vault Username/Password Authentication Configuration
</p>


<h3>Details</h3>

<p>Interact with vault's username/password authentication backend.
This backend can be used to configure basic username+password
authentication, suitable for human users.  For more information,
please see the vault documentation
https://developer.hashicorp.com/vault/docs/auth/userpass
</p>


<h3>Super class</h3>

<p><code>vaultr::vault_client_object</code> -&gt; <code>vault_client_auth_userpass</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-vault_client_auth_userpass-new"><code>vault_client_auth_userpass$new()</code></a>
</p>
</li>
<li> <p><a href="#method-vault_client_auth_userpass-custom_mount"><code>vault_client_auth_userpass$custom_mount()</code></a>
</p>
</li>
<li> <p><a href="#method-vault_client_auth_userpass-write"><code>vault_client_auth_userpass$write()</code></a>
</p>
</li>
<li> <p><a href="#method-vault_client_auth_userpass-read"><code>vault_client_auth_userpass$read()</code></a>
</p>
</li>
<li> <p><a href="#method-vault_client_auth_userpass-delete"><code>vault_client_auth_userpass$delete()</code></a>
</p>
</li>
<li> <p><a href="#method-vault_client_auth_userpass-update_password"><code>vault_client_auth_userpass$update_password()</code></a>
</p>
</li>
<li> <p><a href="#method-vault_client_auth_userpass-update_policies"><code>vault_client_auth_userpass$update_policies()</code></a>
</p>
</li>
<li> <p><a href="#method-vault_client_auth_userpass-list"><code>vault_client_auth_userpass$list()</code></a>
</p>
</li>
<li> <p><a href="#method-vault_client_auth_userpass-login"><code>vault_client_auth_userpass$login()</code></a>
</p>
</li>
</ul>
<details open><summary>Inherited methods</summary><ul>
<li><span class="pkg-link" data-pkg="vaultr" data-topic="vault_client_object" data-id="format"><a href="../../vaultr/html/vault_client_object.html#method-vault_client_object-format"><code>vaultr::vault_client_object$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="vaultr" data-topic="vault_client_object" data-id="help"><a href="../../vaultr/html/vault_client_object.html#method-vault_client_object-help"><code>vaultr::vault_client_object$help()</code></a></span></li>
</ul></details><hr>
<a id="method-vault_client_auth_userpass-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Create a <code>vault_client_userpass</code> object. Not typically
called by users.
</p>


<h5>Usage</h5>

<div class="r"><pre>vault_client_auth_userpass$new(api_client, mount)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>api_client</code></dt>
<dd>
<p>A vault_api_client object</p>
</dd>
<dt><code>mount</code></dt>
<dd>
<p>Mount point for the backend</p>
</dd>
</dl>
</div>


<hr>
<a id="method-vault_client_auth_userpass-custom_mount"></a>



<h4>Method <code>custom_mount()</code>
</h4>

<p>Set up a <code>vault_client_auth_userpass</code> object at a
custom mount.  For example, suppose you mounted the
<code>userpass</code> authentication backend at <code style="white-space: pre;">⁠/userpass2⁠</code> you might
use <code>up &lt;- vault$auth$userpass2$custom_mount("/userpass2")</code> -
this pattern is repeated for other secret and authentication
backends.
</p>


<h5>Usage</h5>

<div class="r"><pre>vault_client_auth_userpass$custom_mount(mount)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>mount</code></dt>
<dd>
<p>String, indicating the path that the engine is mounted at.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-vault_client_auth_userpass-write"></a>



<h4>Method <code>write()</code>
</h4>

<p>Create or update a user.
</p>


<h5>Usage</h5>

<div class="r"><pre>vault_client_auth_userpass$write(
  username,
  password = NULL,
  policies = NULL,
  ttl = NULL,
  max_ttl = NULL,
  bound_cidrs = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>username</code></dt>
<dd>
<p>Username for the user</p>
</dd>
<dt><code>password</code></dt>
<dd>
<p>Password for the user (required when creating a
user only)</p>
</dd>
<dt><code>policies</code></dt>
<dd>
<p>Character vector of policies for the user</p>
</dd>
<dt><code>ttl</code></dt>
<dd>
<p>The lease duration which decides login expiration</p>
</dd>
<dt><code>max_ttl</code></dt>
<dd>
<p>Maximum duration after which login should expire</p>
</dd>
<dt><code>bound_cidrs</code></dt>
<dd>
<p>Character vector of CIDRs.  If set,
restricts usage of the login and token to client IPs falling
within the range of the specified CIDR(s).</p>
</dd>
</dl>
</div>


<hr>
<a id="method-vault_client_auth_userpass-read"></a>



<h4>Method <code>read()</code>
</h4>

<p>Reads the properties of an existing username.
</p>


<h5>Usage</h5>

<div class="r"><pre>vault_client_auth_userpass$read(username)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>username</code></dt>
<dd>
<p>Username to read</p>
</dd>
</dl>
</div>


<hr>
<a id="method-vault_client_auth_userpass-delete"></a>



<h4>Method <code>delete()</code>
</h4>

<p>Delete a user
</p>


<h5>Usage</h5>

<div class="r"><pre>vault_client_auth_userpass$delete(username)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>username</code></dt>
<dd>
<p>Username to delete</p>
</dd>
</dl>
</div>


<hr>
<a id="method-vault_client_auth_userpass-update_password"></a>



<h4>Method <code>update_password()</code>
</h4>

<p>Update password for a user
</p>


<h5>Usage</h5>

<div class="r"><pre>vault_client_auth_userpass$update_password(username, password)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>username</code></dt>
<dd>
<p>Username for the user to update</p>
</dd>
<dt><code>password</code></dt>
<dd>
<p>New password for the user</p>
</dd>
</dl>
</div>


<hr>
<a id="method-vault_client_auth_userpass-update_policies"></a>



<h4>Method <code>update_policies()</code>
</h4>

<p>Update vault policies for a user
</p>


<h5>Usage</h5>

<div class="r"><pre>vault_client_auth_userpass$update_policies(username, policies)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>username</code></dt>
<dd>
<p>Username for the user to update</p>
</dd>
<dt><code>policies</code></dt>
<dd>
<p>Character vector of policies for this user</p>
</dd>
</dl>
</div>


<hr>
<a id="method-vault_client_auth_userpass-list"></a>



<h4>Method <code>list()</code>
</h4>

<p>List users known to vault
</p>


<h5>Usage</h5>

<div class="r"><pre>vault_client_auth_userpass$list()</pre></div>


<hr>
<a id="method-vault_client_auth_userpass-login"></a>



<h4>Method <code>login()</code>
</h4>

<p>Log into the vault using username/password
authentication.  Normally you would not call this directly
but instead use <code style="white-space: pre;">⁠$login⁠</code> with <code>method = "userpass"</code> and
proving the <code>username</code> argument and optionally the <code>password</code>
argument.  This function returns a vault token but does not
set it as the client token.
</p>


<h5>Usage</h5>

<div class="r"><pre>vault_client_auth_userpass$login(username, password = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>username</code></dt>
<dd>
<p>Username to authenticate with</p>
</dd>
<dt><code>password</code></dt>
<dd>
<p>Password to authenticate with. If omitted or
<code>NULL</code> and the session is interactive, the password will be
prompted for.</p>
</dd>
</dl>
</div>




<h3>Examples</h3>

<pre><code class="language-R">server &lt;- vaultr::vault_test_server(if_disabled = message)
if (!is.null(server)) {
  root &lt;- server$client()

  # The userpass authentication backend is not enabled by default,
  # so we need to enable it first
  root$auth$enable("userpass")

  # Then we can add users:
  root$auth$userpass$write("alice", "p4ssw0rd")

  # Create a new client and login with this user:
  alice &lt;- vaultr::vault_client(
    addr = server$addr,
    login = "userpass",
    username = "alice",
    password = "p4ssw0rd")

  # (it is not recommended to login with the password like this as
  # it will end up in the command history, but in interactive use
  # you will be prompted securely for password)

  # Alice has now logged in and has only "default" policies
  alice$auth$token$lookup_self()$policies

  # (wheras our original root user has the "root" policy)
  root$auth$token$lookup_self()$policies
}
</code></pre>


</div>