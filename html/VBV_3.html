<div class="container">

<table style="width: 100%;"><tr>
<td>moving.decomposition</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>moving.decomposition – decompose a times series into locally estimated trend and season figures</h2>

<h3>Description</h3>

<p>moving.decomposition – decompose a times series into locally estimated trend and season figures
</p>


<h3>Usage</h3>

<pre><code class="language-R">moving.decomposition(n, p, q.vec, m, base.period, lambda1, lambda2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>number of observation points (must be odd!). Internally this will be transformed to seq( -(n-1)/2, (n-1)/2, 1)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>maximum exponent in polynomial for trend</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>q.vec</code></td>
<td>
<p>vector containing frequencies to use for seasonal component, given as integers, i.e. c(1, 3, 5) for 1/2<em>pi, 3/2</em>pi, 5/2*pi (times length of base period)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>m</code></td>
<td>
<p>width of moving window</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base.period</code></td>
<td>
<p>base period in number of observations, i.e. 12 for monthly data with yearly oscillations</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda1</code></td>
<td>
<p>penalty weight for smoothness of trend</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda2</code></td>
<td>
<p>penalty weight for smoothness of seasonal component</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>list with the following components:
</p>

<ul><li>
<p>W1nxn matrix of weights. Trend is estimated as W1 %<em>% y, if y is the data vector</em>
</p>
<p>W2nxn matrix of weights. Season is estimated as W2 %% y, if y is the data vector
</p>
</li></ul>
<h3>Note</h3>

<p>lambda1 == lambda2 == Inf result in estimations of the original Berliner Verfahren
</p>


<h3>Examples</h3>

<pre><code class="language-R">### Usage of moving.decomposition

t &lt;- 1:121 # equidistant time points, i.e. 5 days

m &lt;- 11

p &lt;- 2     # maximally quadratic
q &lt;- c(1, 3, 5)   # 'seasonal' components within the base period
base.period &lt;- 24 # i.e. hourly data with daily cycles
l1 &lt;- 1    
l2 &lt;- 1

m.dec &lt;- moving.decomposition( length(t), p, q, m, base.period, l1, l2)
</code></pre>


</div>